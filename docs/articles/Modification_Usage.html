<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Testing New Operators using the MOEADr Package • MOEADr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Testing New Operators using the MOEADr Package">
<meta property="og:description" content="MOEADr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MOEADr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Basic_Usage.html">Basic Usage of the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/Comparison_Usage.html">Fine tuning MOEA/D configurations using MOEADr and irace</a>
    </li>
    <li>
      <a href="../articles/Modification_Usage.html">Testing New Operators using the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/problem-definition.html">Defining Problems in the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/writing-functions-for-moeadr.html">Writing Extensions for the MOEADr Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fcampelo/MOEADr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Testing New Operators using the MOEADr
Package</h1>
                        <h4 data-toc-skip class="author">Claus
Aranha</h4>
            
            <h4 data-toc-skip class="date">2022-11-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fcampelo/MOEADr/blob/HEAD/vignettes/Modification_Usage.Rmd" class="external-link"><code>vignettes/Modification_Usage.Rmd</code></a></small>
      <div class="hidden name"><code>Modification_Usage.Rmd</code></div>

    </div>

    
    
<p>Let us show how to prepare a new component for the MOEADr framework,
add it to an existing algorithmic composition, and perform some basic
comparisons. For this example, we will create a simple variation
operator that does not exist in the package in its current state, but
the same principle works for adding components of other classes.</p>
<div class="section level2">
<h2 id="creating-a-new-operator">Creating a new operator<a class="anchor" aria-label="anchor" href="#creating-a-new-operator"></a>
</h2>
<p>Consider the following “<em>Gaussian Mutation</em>” operator: given a
set <span class="math inline">\(X\)</span> of solutions <span class="math inline">\(\mathbf{x_i} \in X\)</span> we add, with
probability <span class="math inline">\(p\)</span>, a gaussian noise
<span class="math inline">\(r_{ij} \sim \mathcal{N}(\mu,
\sigma)\)</span> to each <span class="math inline">\(x_{ij} \in
\mathbf{x_i} \in X\)</span>. The <em>R</em> code for this operator is as
follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variation_gaussmut</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>, <span class="va">mean</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">sd</span> <span class="op">=</span> <span class="fl">0.1</span>, <span class="va">p</span> <span class="op">=</span> <span class="fl">0.1</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># You want to do some error checking on the parameters here</span></span>
<span>  <span class="co"># But for the sake of brevity in this case study, we are skipping it.</span></span>
<span>  </span>
<span>  <span class="va">R</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>,    <span class="co"># vector of normally distributed values, </span></span>
<span>             mean <span class="op">=</span> <span class="va">mean</span>,  <span class="co"># length(R) = nrow(X) * ncol(X)</span></span>
<span>             sd   <span class="op">=</span> <span class="va">sd</span><span class="op">)</span></span>
<span>  <span class="va">R</span> <span class="op">&lt;-</span> <span class="va">R</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">p</span><span class="op">)</span> <span class="co"># Apply binary mask, probability = p</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="va">X</span> <span class="op">+</span> <span class="va">R</span><span class="op">)</span>                   <span class="co"># Add mutations to the solution matrix</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We would like to highlight a few characteristics of the code sample
above. First, the name of the function must be in the form
<em>variation_[functionname]</em>. The MOEADr package uses the function
name prefixes to perform some automated functions such as listing
existing components and error checking. The list of current function
prefixes and their meaning is:</p>
<ul>
<li>
<em>constraint_</em>: Constraint handling components</li>
<li>
<em>decomposition_</em>: Decomposition functions</li>
<li>
<em>ls_</em>: Local search operators</li>
<li>
<em>scalarization_</em>: Scalarization functions</li>
<li>
<em>stop_</em>: Stop criteria components</li>
<li>
<em>uptd_</em>: Update components</li>
<li>
<em>variation_</em>: Variation operators</li>
</ul>
<p>Second, the parameters in the function definition must include: the
solution set matrix <span class="math inline">\(X\)</span>, the local
parameters for the function, and finally an ellipsis argument to catch
any other inputs passed by the main <em>moead()</em> call, such as
objective values and former solution sets. If you want examples of using
these parameters please look at the source code for some of the
variation operators included, such as the Binomial Recombination
operator (<em>variation_binrec</em>)</p>
<p>Other component classes follow similar rules. Please look at existing
implementations as basis for new ideas.</p>
</div>
<div class="section level2">
<h2 id="testing-the-new-operator">Testing the new operator<a class="anchor" aria-label="anchor" href="#testing-the-new-operator"></a>
</h2>
<p>The <strong>MOEADr</strong> package first searches for operators in
the base R environment. Therefore, if you have named your component
correctly, all you need to do is add it to the appropriate parameter in
the <em>moead()</em> call.</p>
<p>For example, let us replace the variation stack of the original
MOEA/D by our Gaussian Mutation operator, followed by simple truncation,
and test it on a standard benchmark function (performing a qualitative
graphical comparison against the original MOEA/D just for fun):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fcampelo.github.io/MOEADr/" class="external-link">MOEADr</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jakobbossek/smoof" class="external-link">smoof</a></span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'smoof' was built under R version 4.2.2</span></span></code></pre>
<pre><code><span><span class="co">## Warning: package 'ParamHelpers' was built under R version 4.2.2</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ZDT1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_vectorized_smoof.html">make_vectorized_smoof</a></span><span class="op">(</span>prob.name  <span class="op">=</span> <span class="st">"ZDT1"</span>,</span>
<span>                              dimensions <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">problem.zdt1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name       <span class="op">=</span> <span class="st">"ZDT1"</span>,</span>
<span>                      xmin       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>                      xmax       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>                      m          <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">myvar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>                                   <span class="co"># Initialize variation stack</span></span>
<span><span class="va">myvar</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"gaussmut"</span>, p <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>    <span class="co"># Our new operator</span></span>
<span><span class="va">myvar</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"truncate"</span><span class="op">)</span>             <span class="co"># Truncation repair operator</span></span>
<span></span>
<span><span class="va">results.orig</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/moead.html">moead</a></span><span class="op">(</span>problem  <span class="op">=</span> <span class="va">problem.zdt1</span>,</span>
<span>                       preset   <span class="op">=</span> <span class="fu"><a href="../reference/preset_moead.html">preset_moead</a></span><span class="op">(</span><span class="st">"original"</span><span class="op">)</span>,</span>
<span>                       showpars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>show.iters <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>, </span>
<span>                       seed     <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">results.myvar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/moead.html">moead</a></span><span class="op">(</span>problem  <span class="op">=</span> <span class="va">problem.zdt1</span>,</span>
<span>                       preset   <span class="op">=</span> <span class="fu"><a href="../reference/preset_moead.html">preset_moead</a></span><span class="op">(</span><span class="st">"original"</span><span class="op">)</span>,</span>
<span>                       variation <span class="op">=</span> <span class="va">myvar</span>,</span>
<span>                       showpars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>show.iters <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>, </span>
<span>                       seed     <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
<p>Since the function that implements the Gaussian Mutation operator was
defined in the main environment, and has the required
<em>variation_</em> prefix, all that we need to do to use it in the
<em>moead()</em> function is to add the necessary parameters to the
variation stack. The figures below show the final Pareto front for both
the standard MOEA/D and the MOEA/D with a Gaussian Mutation operator.
From these images, it seems (rather unsurprisingly) that the new
operator still needs some work.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results.orig</span>, suppress.pause <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Modification_Usage_files/figure-html/unnamed-chunk-3-1.png" width="528" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results.myvar</span>, suppress.pause <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Modification_Usage_files/figure-html/unnamed-chunk-3-2.png" width="528" style="display: block; margin: auto;"></p>
<p>We welcome new contributions to <strong>MOEADr</strong>’s component
library: users are invited and encouraged to contact us to add their
published contributions to the package (or simply clone the GitHub
repository and submit his or her contribution as a pull request).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Felipe Campelo, Claus Aranha.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
